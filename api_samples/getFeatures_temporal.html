<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<script src="http://maps.kosmosnimki.ru/api/apil.js?key=U92596WMIH" charset="windows-1251"></script> 

<title>GeoMixer API - примеры использования</title>
</head>
<body>
<div id="map" style="width: 800px; height: 600px; float: left;"></div> <!--задаем контейнер, в который загружается карта -->
<div id="description" style="width: 400px; overflow: auto; padding-left: 20px;">
Показан пример <button id="getFeatures">получения всех объектов</button> мультивременного векторного слоя
<button id="setVisible">Показать слой</button>
<div id="result" style="">
</div>
</div>

<script>

var div = document.getElementById('map');

createFlashMap(div, 'maps.kosmosnimki.ru', "UIRCQ",
	function (map) 
	{
		map.moveTo(48.109130, 46.660157, 8);

		var myLayer = map.layers['Съёмка'];
		document.getElementById("setVisible").onclick = function()
		{
			myLayer.setVisible(true);
		}
		
		var geoMerc = { type: "POLYGON", coordinates: [[43, 46, 60, 46, 60, 36, 43, 36]] };
	
		document.getElementById("getFeatures").onclick = function()
		{
			myLayer.getFeatures(function(features) 
				{
					var out = '';
					var str = 'Слой: <b>' + myLayer.properties.title + '</b> обьектов: ';
					str += features.length;
					//alert(str);
					document.getElementById("result").innerHTML = str;
				}
			);
		}
	}
);

</script>

</body>
</html>
